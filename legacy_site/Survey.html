<!DOCTYPE html>
<html lang="es" class="scroll-smooth antialiased">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="PHL | Survey" />
  <meta name="theme-color" content="#050505" />
  <title>PHL | Survey</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    /**
     * Para soportar opacidades tipo bg-brand-gold/60 con colores custom:
     * usamos rgb(var(--x) / <alpha-value>)
     */
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              bg: 'rgb(var(--brand-bg) / <alpha-value>)',
              panel: 'rgb(var(--brand-panel) / <alpha-value>)',
              gold: 'rgb(var(--brand-gold) / <alpha-value>)',
            }
          },
          fontFamily: {
            didot: ['"Bodoni Moda"', 'serif'],
            geo: ['"Montserrat"', 'sans-serif'],
          },
          animation: {
            'fade-up': 'fadeInUp 0.85s ease-out forwards',
            'spin-slow': 'spin 50s linear infinite',
            'shimmer': 'shimmer 1.3s ease-in-out infinite',
          },
          keyframes: {
            fadeInUp: {
              '0%': { opacity: '0', transform: 'translateY(18px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            shimmer: {
              '0%': { transform: 'translateX(-60%)' },
              '100%': { transform: 'translateX(120%)' },
            }
          }
        }
      }
    }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,400;500;600;700&family=Montserrat:wght@200;300;400;500;600&display=swap" rel="stylesheet" />

  <style>
    :root{
      --brand-bg: 5 5 5;
      --brand-panel: 15 15 15;
      --brand-gold: 197 160 89;

      --noise-url: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }
    body { background-color: rgb(var(--brand-bg)); color: #e5e7eb; overflow-x: hidden; }
    .bg-noise { position: fixed; inset: 0; pointer-events: none; z-index: 40; opacity: 0.04; background-image: var(--noise-url); }
    .glass-panel { background: rgba(15, 15, 15, 0.62); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
    ::selection { background-color: rgb(var(--brand-gold)); color: #000; }

    /* Input range pulido (si lo usas más adelante) */
    input[type=range] { -webkit-appearance: none; background: transparent; }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%;
      background: rgb(var(--brand-gold)); cursor: pointer; margin-top: -6px;
    }
    input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 2px; cursor: pointer; background: rgba(255,255,255,0.14); }

    /* Skeleton shimmer */
    .shimmer {
      position: relative;
      overflow: hidden;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.06);
    }
    .shimmer::after{
      content: "";
      position: absolute;
      top: 0; left: -40%;
      width: 40%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(197,160,89,0.22), transparent);
      animation: shimmer 1.25s ease-in-out infinite;
    }
  </style>
</head>

<body class="font-geo bg-brand-bg">
  <div class="bg-noise" aria-hidden="true"></div>

  <main>
    <section id="survey" class="min-h-screen pb-28 pt-20 md:pt-24 bg-brand-panel relative overflow-hidden">
      <div class="absolute top-0 right-0 w-[560px] h-[560px] bg-blue-900/10 blur-[160px] rounded-full pointer-events-none"></div>
      <div class="absolute -top-24 left-1/2 -translate-x-1/2 w-[720px] h-[720px] bg-brand-gold/5 blur-[200px] rounded-full pointer-events-none"></div>

      <div class="max-w-2xl mx-auto px-6 relative z-10">
        <header class="mb-10 text-center">
          <p class="text-[10px] tracking-[0.35em] text-brand-gold uppercase mb-3">Petrinovic Intelligence</p>
          <h1 class="font-didot text-3xl md:text-4xl text-white mb-3">Conozcámonos un poco</h1>
          <p class="text-xs md:text-sm text-gray-400 max-w-xl mx-auto">
            Responde algunas preguntas rápidas sobre tu contexto. Te las mostraremos de a una, sin presión.
          </p>
        </header>

        <!-- CARD PRINCIPAL -->
        <div id="survey-card" class="glass-panel rounded-3xl px-6 py-7 md:px-8 md:py-8 shadow-2xl border border-white/5 transition-all duration-300">
          <!-- barra de progreso -->
          <div class="flex items-center justify-between mb-6 gap-4">
            <div class="flex-1 h-[3px] bg-black/60 rounded-full overflow-hidden">
              <div id="survey-progress" class="h-full bg-brand-gold/80 transition-all duration-500" style="width: 0%"></div>
            </div>
            <span id="survey-step-label" class="text-[10px] tracking-[0.28em] uppercase text-gray-500">
              Pregunta 1 / 15
            </span>
          </div>

          <!-- contenido de la pregunta -->
          <div id="survey-question" class="space-y-4 md:space-y-5">
            <div class="flex items-start justify-between gap-4">
              <div>
                <p id="survey-question-tag" class="text-[11px] tracking-[0.3em] uppercase text-brand-gold/80">Pregunta 1</p>
                <h2 id="survey-question-title" class="font-didot text-2xl md:text-3xl text-white mt-2"></h2>
                <p id="survey-question-subtitle" class="text-xs md:text-sm text-gray-400 max-w-md mt-2"></p>
              </div>

              <!-- micro-indicador de estado -->
              <div class="hidden md:flex items-center gap-2 text-[10px] tracking-[0.22em] uppercase text-gray-500">
                <span class="inline-block w-1.5 h-1.5 rounded-full bg-brand-gold/60"></span>
                <span>Survey</span>
              </div>
            </div>

            <div id="survey-options" class="mt-4 space-y-3" role="radiogroup" aria-label="Opciones de respuesta"></div>
          </div>

          <!-- navegación -->
          <div class="mt-8 flex items-center justify-between gap-4">
            <button
              id="survey-prev"
              class="text-[10px] tracking-[0.25em] uppercase px-4 py-2 border border-white/10 text-gray-400 rounded-full hover:border-white/30 hover:text-white transition disabled:opacity-30 disabled:cursor-not-allowed"
              type="button"
            >
              Atrás
            </button>

            <button
              id="survey-next"
              class="group inline-flex items-center gap-2 text-[10px] tracking-[0.3em] uppercase px-6 py-3 rounded-full bg-white text-black font-semibold hover:bg-brand-gold transition-all disabled:opacity-30 disabled:cursor-not-allowed"
              type="button"
            >
              <span id="survey-next-label">Siguiente</span>
              <span class="inline-flex items-center justify-center w-4 h-4 rounded-full border border-black/40 group-hover:translate-x-0.5 transition-transform">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-2.5 h-2.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6" />
                </svg>
              </span>
            </button>
          </div>

          <!-- mini-disclaimer dentro del card -->
          <p class="mt-6 text-[11px] text-gray-500 leading-relaxed">
            Recomendaciones orientativas. No constituye consejo médico ni diagnóstico.
          </p>
        </div>

        <!-- PROCESANDO (nuevo) -->
        <div id="survey-processing" class="hidden mt-10">
          <div class="glass-panel rounded-3xl px-6 py-7 md:px-8 md:py-8 border border-white/5 shadow-2xl">
            <div class="flex items-start justify-between gap-6">
              <div>
                <p class="text-[10px] tracking-[0.35em] uppercase text-brand-gold/80">Procesando</p>
                <h2 class="font-didot text-2xl md:text-3xl text-white mt-2">Construyendo tu recomendación</h2>
                <p class="text-xs md:text-sm text-gray-400 mt-2 max-w-lg">
                  Analizamos tu objetivo, hábitos y carga cognitiva para sugerir un kit y un protocolo inicial.
                </p>
              </div>

              <!-- icono ad hoc (look & feel PHL) -->
              <div class="shrink-0 w-14 h-14 rounded-2xl border border-brand-gold/25 bg-black/30 backdrop-blur flex items-center justify-center">
                <svg viewBox="0 0 64 64" class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" fill="none">
                  <path d="M32 6c10.5 0 19 8.5 19 19 0 14-19 33-19 33S13 39 13 25C13 14.5 21.5 6 32 6Z" stroke="rgb(197 160 89)" stroke-width="2.2" opacity="0.9"/>
                  <path d="M32 18v14" stroke="rgb(197 160 89)" stroke-width="2.2" stroke-linecap="round"/>
                  <path d="M32 32l10 6" stroke="rgb(197 160 89)" stroke-width="2.2" stroke-linecap="round"/>
                  <circle cx="32" cy="25" r="10.5" stroke="rgb(197 160 89)" stroke-width="1.6" opacity="0.35"/>
                </svg>
              </div>
            </div>

            <!-- barra "AI-like" -->
            <div class="mt-6">
              <div class="flex items-center justify-between mb-2">
                <span id="processing-label" class="text-[10px] tracking-[0.28em] uppercase text-gray-500">Inicializando</span>
                <span id="processing-pct" class="text-[10px] tracking-[0.28em] uppercase text-gray-500">0%</span>
              </div>
              <div class="h-[3px] bg-black/60 rounded-full overflow-hidden">
                <div id="processing-bar" class="h-full bg-brand-gold/80 transition-all duration-300" style="width: 0%"></div>
              </div>
            </div>

            <!-- skeletons -->
            <div class="mt-6 grid gap-3">
              <div class="shimmer rounded-2xl h-12"></div>
              <div class="shimmer rounded-2xl h-12"></div>
              <div class="shimmer rounded-2xl h-12"></div>
            </div>

            <p class="mt-6 text-[11px] text-gray-500 leading-relaxed">
              Nota: este resultado es orientativo y puede ajustarse luego con tu feedback.
            </p>
          </div>
        </div>

        <!-- estado final -->
        <div id="survey-finish" class="hidden mt-10 text-center space-y-4">
          <h2 class="font-didot text-2xl md:text-3xl text-white">Gracias por compartir tu contexto</h2>
          <p class="text-xs md:text-sm text-gray-400 max-w-lg mx-auto">
            Ya tenemos una imagen más clara de tu perfil. Usaremos estas respuestas para ajustar tus futuras recomendaciones y protocolos.
          </p>

          <div id="survey-result" class="mt-6 max-w-xl mx-auto text-left glass-panel rounded-3xl px-6 py-6 border border-white/5"></div>

          <a
            id="survey-cta"
            class="inline-flex mt-5 items-center justify-center px-6 py-3 rounded-full bg-white text-black font-semibold hover:bg-brand-gold transition"
            href="#"
            aria-label="Ir al kit recomendado"
          >
            Ver kit recomendado
          </a>

          <button
            id="survey-restart"
            class="block mx-auto mt-3 text-[10px] tracking-[0.25em] uppercase text-gray-500 hover:text-brand-gold transition"
            type="button"
          >
            Reiniciar survey
          </button>
        </div>
      </div>
    </section>
  </main>

  <script>
  const questions = [
    { id:'edad', tag:'1. Edad', title:'¿En qué rango etario te encuentras?', subtitle:'', options:['18–24','25–34','35–44','45–54','55+'] },
    { id:'sexo', tag:'2. Sexo biológico', title:'¿Cómo te identificas?', subtitle:'Relevante para recomendaciones generales de micronutrientes, sin enfoque médico.', options:['Mujer','Hombre','Prefiero no decir'] },
    { id:'peso', tag:'3. Peso corporal', title:'¿Cuál es tu peso aproximado?', subtitle:'', options:['< 60 kg','60–75 kg','76–90 kg','90 kg+'] },
    { id:'estatura', tag:'4. Estatura', title:'¿Cuál es tu estatura aproximada?', subtitle:'Esto nos permite estimar tu IMC sin usarlo como diagnóstico.', options:['< 1,60 m','1,60–1,70 m','1,71–1,80 m','1,80 m+'] },
    { id:'estructura', tag:'5. Estructura corporal', title:'¿Cómo describirías tu estructura corporal predominante?', subtitle:'', options:['Endomorfo (tendencia a acumular grasa)','Mesomorfo (estructura atlética)','Ectomorfo (contextura delgada)','No estoy seguro/a'] },
    { id:'actividad', tag:'6. Actividad